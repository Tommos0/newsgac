{% extends "base.html" %}
{% block content %}

    <div class="page-header">
        <h1>Data source:
            <a href="{{ url_for('data_sources.get_data_source_page', data_source_id=data_source._id) }}">
                <small> {{ data_source.display_title }} </small>
            </a>
        </h1>

        Processing status: {{ data_source.status() }}

        {% if data_source.status() == 'SUCCESS' %}
            <a class="btn btn-info"
                href="{{ url_for('data_sources.visualise_stats', data_source_id=data_source._id) }}">
                <span class="glyphicon glyphicon-eye-open"></span> Data Analysis</a>
            {% if data_source.training_purpose %}
                <a class="btn btn-warning"
                href="{{ url_for('data_sources.apply_grid_search', data_source_id=data_source._id) }}">
                <span class="glyphicon glyphicon-search"></span> Recommend Algorithm </a>
            {% endif %}
        {% endif %}

{#        <ws class="btn btn-danger"#}
{#               href="{{ url_for('data_sources.delete_data_source', data_source_id=data_source._id) }}">#}
{#                <span class="glyphicon glyphicon-trash"></span> Delete</ws>#}

    </div>

    {% macro row(label) -%}
        <div class="row">
            <div class="col-md-2">
                <p class="center-align-pad"><strong>{{ label }}</strong></p>
            </div>
            <div class="col-md-10">
                <p class="center-align-pad">{{ caller() }}</p>
            </div>
        </div>
    {%- endmacro %}

    {% call row('description') %}
        {{ data_source.description  }}
    {% endcall %}

    {% if data_source.status() == 'SUCCESS' %}
        {% call row('Number of articles:') %}
            {{ data_source.articles | length  }}
        {% endcall %}

        {% for label, count in label_count.iteritems() %}
            {% call row(label) %}
                {{ count }}
            {% endcall %}
        {% endfor %}
    {% endif %}


{% endblock %}