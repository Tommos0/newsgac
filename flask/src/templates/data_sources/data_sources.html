{% extends "base.html" %}
{% block content %}

    {% if data_sources|length == 0 %}
        <div class="page-header">
            <h1>Data sources <small>added by you</small></h1>
            <a class="btn btn-success" href="{{ url_for('data_sources.create_data_source') }}"><span class="glyphicon glyphicon-plus "></span> New </a>
        </div>
        <p><i>There are no data sources to view.</i></p>
    {% else %}
        <div class="page-header">
            <h1>Data sources <small>added by you</small></h1>
            <a class="btn btn-success" href="{{ url_for('data_sources.create_data_source') }}"><span class="glyphicon glyphicon-plus "></span> New </a>
            {% if processed_data_sources|length > 0 %}
                <a class="btn btn-info" href="{{ url_for('data_sources.sources_overview') }}"><span class="glyphicon glyphicon-eye-open "></span> Overview</a>
            {% endif %}
        </div>

        <!--<div class="container">-->
            <div class="row">
                <div class="col-xs-12">
                    <table class="table table-bordered table-hover dt-responsive">
                    <!--<caption class="text-center">DataTables</caption>-->
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Processed</th>
                            <th>Description</th>
                            <th>Time of creation</th>
                            <th>Processing duration</th>
                            <th>Number of instances</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for data_source in data_sources %}
                        <tr>
                            <td>{{ data_source.display_title }}</td>
                            {% if data_source.processing_completed != None and data_source.processing_started != None %}
                                <td>Yes</td>
                            {% elif data_source.processing_completed == None and data_source.processing_started != None %}
                                <td>In progress</td>
                            {% else %}
                                <td>No</td>
                            {% endif %}
                            <td>{{ data_source.description }}</td>
                            <td>{{ data_source.get_user_friendly_created().strftime("%d-%m-%Y at %H:%M") }}</td>
                            {% if data_source.processing_completed != None and data_source.processing_started != None %}
                                <td>{{ data_source.get_processing_duration() }}</td>
                            {% elif data_source.processing_completed == None and data_source.processing_started != None %}
                                <td>In progress</td>
                            {% else %}
                                <td>N/A</td>
                            {% endif %}

                            <td>{{ data_source.get_number_of_instances() }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>

                    </table>
                </div>
            </div>
        <!--</div>-->

    {% endif %}
{% endblock %}

